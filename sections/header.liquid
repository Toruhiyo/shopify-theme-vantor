<header class="site-header">
  <div class="page-width site-header__inner">
    <a class="site-header__logo" href="{{ routes.root_url }}">
      {{ section.settings.logo_text | default: shop.name }}
    </a>

    <nav class="site-nav" aria-label="Primary">
      {% for link in section.settings.menu.links %}
        <div class="site-nav__item">
          <a class="site-nav__link" href="{{ link.url }}">{{ link.title }}</a>
          {% if link.links != blank %}
            <div class="mega-menu">
              {% for child_link in link.links %}
                <div>
                  <p class="mega-menu__heading">{{ child_link.title }}</p>
                  {% for grandchild_link in child_link.links %}
                    <a class="mega-menu__link" href="{{ grandchild_link.url }}">{{ grandchild_link.title }}</a><br>
                  {% endfor %}
                </div>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </nav>

    <div class="site-header__actions">
      <a class="icon-btn" href="{{ routes.search_url }}" aria-label="Search">
        <span>⌕</span>
      </a>
      <a class="icon-btn" href="{{ routes.cart_url }}" aria-label="Cart">
        <span>{{ cart.item_count }}</span>
      </a>
      <button class="icon-btn site-header__menu-toggle" type="button" aria-label="Menu" data-drawer-open>
        <span>☰</span>
      </button>
    </div>
  </div>

  <aside class="mobile-drawer" data-mobile-drawer>
    <button class="icon-btn" type="button" aria-label="Close menu" data-drawer-close>✕</button>
    <nav aria-label="Mobile">
      {% for link in section.settings.menu.links %}
        <a class="mobile-drawer__link" href="{{ link.url }}">{{ link.title }}</a>
      {% endfor %}
    </nav>
  </aside>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo text",
      "default": "VANTOR"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
