<section class="section-spacing">
  <div class="page-width">
    <h1 class="h2 mb-lg">{{ 'search.title' | t }}</h1>

    <form action="{{ routes.search_url }}" method="get" role="search" style="margin-bottom: 2rem;">
      <div style="display: flex; gap: 0.5rem; max-width: 32rem;">
        <input
          type="search"
          name="q"
          value="{{ search.terms | escape }}"
          class="input"
          placeholder="{{ 'search.placeholder' | t }}"
          aria-label="{{ 'search.placeholder' | t }}"
        >
        <button type="submit" class="btn btn--primary">{{ 'search.submit' | t }}</button>
      </div>
    </form>

    {%- if search.performed -%}
      {%- if search.results_count > 0 -%}
        <p class="micro text-muted mb-lg">{{ 'search.results_count' | t: count: search.results_count, terms: search.terms }}</p>
        <div class="grid grid--4">
          {%- for result in search.results -%}
            {%- if result.object_type == 'product' -%}
              {% render 'product-card', product: result %}
            {%- else -%}
              <div class="card" style="padding: 1.25rem;">
                <p class="micro text-muted mb-sm">{{ result.object_type }}</p>
                <h3 class="h4 mb-sm"><a href="{{ result.url }}">{{ result.title }}</a></h3>
                <p class="text-muted" style="font-size: 0.875rem;">{{ result.content | strip_html | truncatewords: 20 }}</p>
              </div>
            {%- endif -%}
          {%- endfor -%}
        </div>

        {%- if search.results_count > search.results.size -%}
          {% comment %} Pagination handled via paginate tag {% endcomment %}
        {%- endif -%}
      {%- else -%}
        <div class="text-center" style="padding: 4rem 0;">
          <p class="h3 mb-md">{{ 'search.no_results' | t: terms: search.terms }}</p>
          <p class="text-muted mb-lg">{{ 'search.no_results_hint' | t }}</p>
        </div>
      {%- endif -%}
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Search results",
  "tag": "section",
  "class": "main-search-section",
  "settings": []
}
{% endschema %}
